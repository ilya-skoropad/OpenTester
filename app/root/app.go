package root

import (
	"fmt"
	"ilya-skoropad/open-tester/models"
	"log"
	"net/http"
)

type App struct {
	config models.AppConfig
}

func (a *App) SetConfig(config models.AppConfig) {
	a.config = config
}

func (a *App) Init() {
	InitRouter()
}

func (a *App) Run() {
	address := fmt.Sprintf(":%d", a.config.ServerPort)
	err := http.ListenAndServe(address, nil)
	if err != nil {
		log.Fatal(err.Error())
	}

	log.Println(fmt.Sprintf("server is working on address %s", address))
}
